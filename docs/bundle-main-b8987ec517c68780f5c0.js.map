{"version":3,"sources":["webpack://Demo/webpack/bootstrap","webpack://Demo/./src/Color.js","webpack://Demo/./src/index.js","webpack://Demo/./src/pattern.vert","webpack://Demo/./src/pattern.frag"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","colorRegExp","hex","toString","length","hue2rgb","q","canvas","gl","vao","program","u_time","u_resolution","u_mouse","u_palette","mouseDown","startX","startY","canvasBounds","Color","g","b","this","color","exec","col","parseInt","substring","factor","Array","isArray","array","Float32Array","f","off","from","validate","Error","h","Math","round","other","ratio","out","config","sqrt","PI","width","height","mouseX","mouseY","resize","window","innerWidth","innerHeight","viewport","createShader","type","source","shader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","console","error","getShaderInfoLog","deleteShader","main","time","uniform1f","uniform2f","uniform4f","clearColor","clear","COLOR_BUFFER_BIT","primitiveType","TRIANGLES","drawArrays","requestAnimationFrame","onMouseMove","ev","clientX","left","self","pageXOffset","clientY","top","pageYOffset","onMouseDown","onMouseUp","onload","document","getElementById","getContext","parentNode","removeChild","msg","innerHTML","vertexShader","VERTEX_SHADER","fragmentShader","FRAGMENT_SHADER","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","deleteProgram","positionAttributeLocation","getAttribLocation","positionBuffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","createVertexArray","bindVertexArray","enableVertexAttribArray","FLOAT","vertexAttribPointer","getUniformLocation","useProgram","addEventListener","getBoundingClientRect","paletteArray","log","uniform3fv"],"mappings":"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","file":"bundle-main-b8987ec517c68780f5c0.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","const colorRegExp = /^(#)?([0-9a-f]+)$/i;\n\nfunction hex(n)\n{\n    const s = n.toString(16);\n\n    return s.length === 1 ? \"0\" + s : s;\n}\n\nfunction hue2rgb(p, q, t){\n    if(t < 0) t += 1;\n    if(t > 1) t -= 1;\n    if(t < 1/6) return p + (q - p) * 6 * t;\n    if(t < 1/2) return q;\n    if(t < 2/3) return p + (q - p) * (2/3 - t) * 6;\n    return p;\n}\n\nexport default class Color\n{\n    r;\n    g;\n    b;\n\n    constructor(r,g,b)\n    {\n        this.r = r;\n        this.g = g;\n        this.b = b;\n    }\n\n    mix(other, ratio, out)\n    {\n        if (!out)\n        {\n            out = new Color();\n        }\n        out.r = (this.r + (other.r - this.r) * ratio)|0;\n        out.g = (this.g + (other.g - this.g) * ratio)|0;\n        out.b = (this.b + (other.b - this.b) * ratio)|0;\n\n        return out;\n    }\n\n    multiply(n, out)\n    {\n        if (!out)\n        {\n            out = new Color();\n        }\n\n        out.r = this.r * n;\n        out.g = this.g * n;\n        out.b = this.b * n;\n        return out;\n    }\n\n    toRGBHex()\n    {\n        return \"#\" + hex(this.r) + hex(this.g) + hex(this.b );\n    }\n\n    toHex()\n    {\n        return (this.r << 16) + (this.g << 8) + this.b;\n    }\n\n    static validate(color)\n    {\n\n        let m;\n        if (typeof color !== \"string\" || !(m = colorRegExp.exec(color)))\n        {\n            return null;\n        }\n        const col = m[2];\n\n        if (col.length === 3)\n        {\n            return new Color(\n                parseInt(col[0], 16) * 17,\n                parseInt(col[1], 16) * 17,\n                parseInt(col[2], 16) * 17\n            )\n        }\n        else if (col.length === 6)\n        {\n            return new Color(\n                parseInt(col.substring(0, 2), 16),\n                parseInt(col.substring(2, 4), 16),\n                parseInt(col.substring(4, 6), 16)\n            )\n        }\n        else\n        {\n            return null;\n        }\n    }\n\n    static from(color, factor = 1.0)\n    {\n        if (Array.isArray(color))\n        {\n            const length = color.length;\n            const array = new Float32Array(length * 3);\n\n            const f = factor/255;\n\n            let off = 0;\n            for (let i = 0; i < length; i++)\n            {\n                const col = Color.from(color[i]);\n                array[off++] = col.r * f;\n                array[off++] = col.g * f;\n                array[off++] = col.b * f;\n            }\n\n            return array;\n        }\n\n        const col = Color.validate(color);\n\n        if (!col)\n        {\n            throw new Error(\"Invalid color \" + color);\n        }\n\n        col.r *= factor;\n        col.g *= factor;\n        col.b *= factor;\n\n        return col;\n    }\n\n    static fromHSL(h,s,l)\n    {\n        let r, g, b;\n\n        if(s <= 0){\n            r = g = b = l; // achromatic\n        }else{\n\n            const q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n            const p = 2 * l - q;\n            r = hue2rgb(p, q, h + 1/3);\n            g = hue2rgb(p, q, h);\n            b = hue2rgb(p, q, h - 1/3);\n        }\n\n        return new Color(\n            Math.round(r * 255),\n            Math.round(g * 255),\n            Math.round(b * 255)\n        );\n    }\n}\n\n","// noinspection ES6UnusedImports\nimport STYLE from \"./style.css\"\n\nimport vertexShaderSource from \"./pattern.vert\"\nimport fragmentShaderSource from \"./pattern.frag\"\nimport Color from \"./Color\";\n\n//console.log(fragmentShaderSource)\n\nconst PHI = (1 + Math.sqrt(5)) / 2;\nconst TAU = Math.PI * 2;\nconst DEG2RAD_FACTOR = TAU / 360;\n\nconst config = {\n    width: 0,\n    height: 0\n};\n\nlet canvas, gl, vao, program;\n\n\n// uniform: current time\nlet u_time;\n\nlet u_resolution;\n\nlet u_mouse;\n\nlet u_palette;\n\n\nlet mouseX = 0, mouseY = 0, mouseDown, startX, startY;\n\n// Get the container element's bounding box\nlet canvasBounds;\n\nfunction resize()\n{\n    const width = (window.innerWidth) & ~15;\n    const height = (window.innerHeight) | 0;\n\n    config.width = width;\n    config.height = height;\n\n    canvas.width = width;\n    canvas.height = height;\n\n    mouseX = width/2;\n    mouseY = height/2;\n\n    gl.viewport(0, 0, canvas.width, canvas.height);\n}\n\nwindow.onload = () => {\n\n    requestAnimationFrame(main);\n};\n\n\n\nfunction createShader(gl, type, source) {\n    const shader = gl.createShader(type);\n    gl.shaderSource(shader, source);\n    gl.compileShader(shader);\n    const success = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n    if (success) {\n        return shader;\n    }\n\n    console.error(gl.getShaderInfoLog(shader));  // eslint-disable-line\n    gl.deleteShader(shader);\n    return undefined;\n}\n\nfunction createProgram(gl, vertexShader, fragmentShader) {\n    const program = gl.createProgram();\n    gl.attachShader(program, vertexShader);\n    gl.attachShader(program, fragmentShader);\n    gl.linkProgram(program);\n    const success = gl.getProgramParameter(program, gl.LINK_STATUS);\n    if (success) {\n        return program;\n    }\n\n    console.error(gl.getProgramInfoLog(program));  // eslint-disable-line\n    gl.deleteProgram(program);\n    return undefined;\n}\n\n\nfunction printError(msg)\n{\n    document.getElementById(\"out\").innerHTML = \"<p>\" + msg + \"</p>\";\n}\n\nfunction main(time)\n{\n    const f = mouseDown ? 1 : -1;\n\n    // update uniforms\n    gl.uniform1f(u_time, time / 1000.0);\n    gl.uniform2f(u_resolution, config.width, config.height);\n    gl.uniform4f(u_mouse, mouseX, config.height - mouseY, startX * f, (config.height - startY) * f);\n\n    gl.clearColor(0, 0, 0, 0);\n    gl.clear(gl.COLOR_BUFFER_BIT);\n\n    // draw\n    const primitiveType = gl.TRIANGLES;\n    const offset = 0;\n    const count = 6;\n    gl.drawArrays(primitiveType, offset, count);\n\n    requestAnimationFrame(main);\n}\n\n\nwindow.onload = () => {\n    // Get A WebGL context\n    canvas = document.getElementById(\"screen\");\n    gl = canvas.getContext(\"webgl2\");\n    if (!gl) {\n        canvas.parentNode.removeChild(canvas);\n        printError(\"Cannot run shader. Your browser does not support WebGL2.\");\n        return;\n    }\n\n    // create GLSL shaders, upload the GLSL source, compile the shaders\n    const vertexShader = createShader(gl, gl.VERTEX_SHADER, vertexShaderSource);\n    const fragmentShader = createShader(gl, gl.FRAGMENT_SHADER, fragmentShaderSource);\n\n    // Link the two shaders into a program\n    program = createProgram(gl, vertexShader, fragmentShader);\n\n    // look up where the vertex data needs to go.\n    const positionAttributeLocation = gl.getAttribLocation(program, \"a_position\");\n\n    // Create a buffer and put three 2d clip space points in it\n    const positionBuffer = gl.createBuffer();\n\n    // Bind it to ARRAY_BUFFER (think of it as ARRAY_BUFFER = positionBuffer)\n    gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\n\n    const positions = [\n        -1, -1,\n         1, -1,\n        -1, 1,\n        -1, 1,\n         1, 1,\n         1,-1\n    ];\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(positions), gl.STATIC_DRAW);\n\n    // Create a vertex array object (attribute state)\n    vao = gl.createVertexArray();\n\n    // and make it the one we're currently working with\n    gl.bindVertexArray(vao);\n\n    // Turn on the attribute\n    gl.enableVertexAttribArray(positionAttributeLocation);\n\n    // Tell the attribute how to get data out of positionBuffer (ARRAY_BUFFER)\n    const size = 2;          // 2 components per iteration\n    const type = gl.FLOAT;   // the data is 32bit floats\n    const normalize = false; // don't normalize the data\n    const stride = 0;        // 0 = move forward size * sizeof(type) each iteration to get the next position\n    let offset = 0;        // start at the beginning of the buffer\n    gl.vertexAttribPointer(\n        positionAttributeLocation, size, type, normalize, stride, offset);\n\n    resize();\n\n    // Tell WebGL how to convert from clip space to pixels\n    gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\n\n\n    u_time = gl.getUniformLocation(program, \"u_time\");\n    u_resolution = gl.getUniformLocation(program, \"u_resolution\");\n    u_mouse = gl.getUniformLocation(program, \"u_mouse\");\n    u_palette = gl.getUniformLocation(program, \"u_palette\");\n\n    // Tell it to use our program (pair of shaders)\n    gl.useProgram(program);\n\n    // Bind the attribute/buffer set we want.\n    gl.bindVertexArray(vao);\n\n    window.addEventListener(\"resize\", resize, true);\n    canvas.addEventListener(\"mousemove\", onMouseMove, true);\n    canvas.addEventListener(\"mousedown\", onMouseDown, true);\n    document.addEventListener(\"mouseup\", onMouseUp, true);\n\n    canvasBounds = document.getElementById(\"screen\").getBoundingClientRect();\n\n    const paletteArray = Color.from(\n        [\n            \"#000\",\n            \"#e71a34\",\n            \"#fff\",\n            \"#0a166d\",\n        ],\n        1\n    );\n\n    console.log(\"PALETTE\", paletteArray);\n\n\n    gl.uniform3fv(u_palette, paletteArray);\n\n    requestAnimationFrame(main)\n}\n\n\n\n// Apply the mouse event listener\n\nfunction onMouseMove(ev)\n{\n    if (mouseDown)\n    {\n        mouseX = (ev.clientX - canvasBounds.left) + self.pageXOffset;\n        mouseY = (ev.clientY - canvasBounds.top) + self.pageYOffset;\n    }\n}\n\nfunction onMouseDown(ev)\n{\n    mouseDown = true;\n    startX = (ev.clientX - canvasBounds.left) + self.pageXOffset;\n    startY = (ev.clientY - canvasBounds.top) + self.pageYOffset;\n    mouseX = startX;\n    mouseY = startY;\n}\n\nfunction onMouseUp(ev)\n{\n    mouseDown = false;\n}\n\n","export default \"#version 300 es\\n#define GLSLIFY 1\\n\\n// an attribute is an input (in) to a vertex shader.\\n// It will receive data from a buffer\\nin vec4 a_position;\\n\\n// all shaders have a main function\\nvoid main() {\\n\\n    // gl_Position is a special variable a vertex shader\\n    // is responsible for setting\\n    gl_Position = a_position;\\n}\\n\";","export default \"#version 300 es\\nprecision lowp float;\\n#define GLSLIFY 1\\n\\nuniform float u_time;\\nuniform vec2 u_resolution;\\nuniform vec4 u_mouse;\\nuniform vec3 u_palette[6];\\n\\nconst float pi = 3.141592653589793;\\nconst float tau = pi * 2.0;\\nconst float hpi = pi * 0.5;\\nconst float phi = (1.0+sqrt(5.0))/2.0;\\n\\nout vec4 outColor;\\n\\n#define MAX_STEPS 100\\n#define MAX_DIST 50.\\n#define SURF_DIST .001\\n\\n#define ROT(a) mat2(cos(a), -sin(a), sin(a), cos(a))\\n#define SHEARX(a) mat2(1, 0, sin(a), 1)\\n\\nconst float smoothness = 0.01;\\n\\nvec3 getPaletteColor(float id)\\n{\\n    int last = u_palette.length() - 1;\\n    //return id < float(last) ? mix(u_palette[int(id)], u_palette[int(id) + 1], fract(id)) : u_palette[last];\\n    return mix(u_palette[int(id)], u_palette[int(id) + 1], fract(id));\\n}\\n// 2d rotation matrix helper\\nmat2 Rot(float a) {\\n    float x = cos(a);\\n    float y = sin(a);\\n    return mat2(x, -y, y, x);\\n}\\n\\nvoid main(void)\\n{\\n    vec2 uv = (gl_FragCoord.xy-.5*u_resolution.xy)/u_resolution.y;\\n    //vec2 m = u_mouse.xy/u_resolution.xy;\\n\\n    uv *= Rot(u_time * 0.23);\\n\\n    float grid = mix(18.0, 4.0, cos(u_time * 0.17) * 0.5 + 0.5 );\\n\\n    vec2 pos = fract(uv * grid) - 0.5;\\n    vec2 id = floor(uv * grid);\\n\\n    float c = 0.0;\\n    for (float y = -1.0; y <= 1.0; y++){\\n        for (float x = -1.0; x <= 1.0; x++) {\\n\\n            vec2 off = vec2(x,y);\\n            float d = length(pos - off);\\n\\n            float d2 = length(id + off) * mix(1.0,10.0, 0.5 + cos(u_time * 0.07) * 0.5);\\n            float size = mix(0.5,1.5, 0.5 + sin(u_time + d2) * 0.5);\\n            c += smoothstep(size + smoothness, size - smoothness,d);\\n        }\\n    }\\n    outColor = vec4(\\n        u_palette[int(mod(c,4.0))],\\n        1.0\\n    );\\n\\n    //outColor = vec4(1,0,1,1);\\n}\\n\";"],"sourceRoot":""}